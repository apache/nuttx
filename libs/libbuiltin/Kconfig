#
# For a description of the syntax of this configuration file,
# see the file kconfig-language.txt in the NuttX tools repository.
#

comment "Toolchain Library Support"

choice
	prompt "Builtin toolchain support"
	default BUILTIN_TOOLCHAIN
	---help---
		Choose to compile libraries related to toolchain into the OS

config BUILTIN_COMPILER_RT
	bool "Builtin LLVM Compiler-rt"

config BUILTIN_LIBGCC
	bool "Builtin libgcc"

choice
	prompt "Builtin toolchain libgcc"
	default BUILTIN_LIBGCC_NONE
	---help---
		Compile the LLVM Compiler-rt library into the OS.

config BUILTIN_TOOLCHAIN
	bool "Link the toolchain library"
	---help---
		Use the toolchain library that comes with the compiler

endchoice

if BUILTIN_COMPILER_RT

config COMPILER_RT_VERSION
	string "Select LLVM Compiler-rt version"
	default "17.0.1"

config COMPILER_RT_HAS_BFLOAT16
	bool "Enable support for bfloat16 in Compiler-rt"
	default n

config COMPILER_RT_PROFILE
	bool "Enable profiling support in Compiler-rt"
	default n

endif # BUILTIN_COMPILER_RT

config BUILTIN_GPROF
	bool "Enable builtin gprof"
	select BUILTIN_TOOLCHAIN
	select BUILTIN_LIBGCC
	default n
	---help---
		Enable gprof profiling support.  This will cause the compiler to
		generate additional code to support profiling.  This will also
		cause the linker to include the gmon.out file in the final
		executable.
		Add the "-pg" parameter to the Makefile when compiling to obtain
		the function call graph of the specified module.

config GPROF_ALL
	bool "Enable all gprof support"
	depends on BUILTIN_GPROF
	default n
	---help---
		Enable gprof profiling for all code, it will instrument
		all code, which will cause a large performance penalty for the code.
		You can add the '-pg' parameter to the specified module in the
		makefile to only analyze the content of the module.
