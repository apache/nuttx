#
# For a description of the syntax of this configuration file,
# see the file kconfig-language.txt in the NuttX tools repository.
#

config BOARD_SAMV7_COMMON
       bool "Board common logic"
       default y
       ---help---
               Board common logic located in each board/common folder.

if BOARD_SAMV7_COMMON

config SAMV7_PROGMEM_MCUBOOT_PARTITION
	bool
	default n
	select MTD
	select MTD_BYTE_WRITE
	select MTD_PARTITION
	select MTD_PROGMEM
	select MTD_PROGMEM_ERASESTATE

menuconfig SAMV7_FORMAT_MCUBOOT
	bool "MCUboot-bootable format"
	default n
	select ARCH_RAMFUNCS
	select BOARDCTL_RESET
	select BOOT_MCUBOOT
	select SAMV7_PROGMEM
	select SAMV7_PROGMEM_MCUBOOT_PARTITION
	select SAMV7_SYSTEMRESET
	---help---
		The MCUboot support of loading the firmware images.

if SAMV7_FORMAT_MCUBOOT

comment "MCUboot Application Image MCUBOOT Update support"

config SAMV7_MCUBOOT_PRIMARY_SLOT_OFFSET
	hex "MCUboot application image primary slot offset"
	default "0x20000"

config SAMV7_MCUBOOT_PRIMARY_SLOT_DEVPATH
	string "Application image primary slot device path"
	default "/dev/mcuboot0"

config SAMV7_MCUBOOT_SECONDARY_SLOT_OFFSET
	hex "MCUboot application image secondary slot offset"
	default "0x48000"  if SAMV7_MEM_FLASH_512
	default "0x80000"  if SAMV7_MEM_FLASH_1024
	default "0x100000" if SAMV7_MEM_FLASH_2048

config SAMV7_MCUBOOT_SECONDARY_SLOT_DEVPATH
	string "Application image secondary slot device path"
	default "/dev/mcuboot1"

config SAMV7_MCUBOOT_SLOT_SIZE
	hex "MCUboot application image slot size (in bytes)"
	default "0x28000" if SAMV7_MEM_FLASH_512
	default "0x60000" if SAMV7_MEM_FLASH_1024
	default "0xe0000" if SAMV7_MEM_FLASH_2048

config SAMV7_MCUBOOT_SCRATCH_OFFSET
	hex "MCUboot scratch partition offset"
	default "0x70000"  if SAMV7_MEM_FLASH_512
	default "0xe0000"  if SAMV7_MEM_FLASH_1024
	default "0x1e0000" if SAMV7_MEM_FLASH_2048

config SAMV7_MCUBOOT_SCRATCH_DEVPATH
	string "Scratch partition device path"
	default "/dev/mcubootS"

config SAMV7_MCUBOOT_SCRATCH_SIZE
	hex "MCUboot scratch partition size (in bytes)"
	default "0x10000" if SAMV7_MEM_FLASH_512
	default "0x20000"

endif # SAMV7_FORMAT_MCUBOOT

endif # BOARD_SAMV7_COMMON
